//output: index.html

- var namespace = "pam"

- var author = "Frank Dip"
- var version = "Version 1.3"
- var title = "Pixel Art Maker"
- var description = "Pixel Art Maker. Using PUG, Bootstrap, SCSS, jQuery, HTML2canvas, and Font awesome. " + version + "."
- var link = "https://codepen.io/LeafDragon/";

//- Variable Chain
//-  File
- var savePNG = namespace + "-save-png"
- var saveJPEG = namespace + "-save-jpeg"
- var deleteConfirmation = namespace + "-delete--confirmation"
- var deleteButton = namespace + "-delete--button"

//- Border
- var border = namespace + "-border"
- var borderDefault = namespace + "-border--default"
- var borderLess = namespace + "-border--less"
- var borderColor = border + "--color"

//- Pixel Art
- var pixelArt = namespace + "-pixel-art"
- var pixelArtPikachu = namespace + "-pixel-art--pikachu"
- var pixelArtPokeball = namespace + "-pixel-art--pokeball"
- var pixelArtModal = pixelArt + "--modal"
- var pixelArtModalPikachu = pixelArtModal + "--pikachu"
- var pixelArtModalPokeball = pixelArtModal + "--pokeball"

//- Help
- var help = namespace + "-help"
- var helpView = namespace + "-help--view"
- var helpViewBody = namespace + "-help--view--body"
- var helpAbout = namespace + "-help--about"

//- Tool
- var colorPicker = namespace +"-color-picker"
- var tool = namespace + "-tool"
- var toolPaint = tool + "--paint"
- var toolDipper = tool + "--dipper"
- var toolEraser = tool + "--eraser"

//- Size Picker
- var sizePicker = namespace + "-size-picker"
- var sizePickerWidth = sizePicker + "--width"
- var sizePickerHeight = sizePicker + "--height"
- var sizePickerModal = sizePicker + "--modal"
- var sizePickerSubmit = sizePicker + "--submit"
- var label = namespace + "-label"

//- Main
- var main = namespace + "-main"
- var mainSizePicker = main + "--size-picker"
- var table = namespace + "-table"

doctype html
html(lang="en-US")
  head
    meta(charset="utf-8")
    title #{title}
    meta(name="description", content=description)
    meta(name="author", content="Frank Dip")
    meta(name="viewport", content="width=device-width, initial-scale=1.0, shrink-to-fit=no")
    link(href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    )
    link(href="styles\\styles.min.css", rel="stylesheet")
    script(defer="", src="https://use.fontawesome.com/releases/v5.0.7/js/all.js")
  body
    // Bootstrap Navbar 
    nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.fixed-top
      div.navbar-brand
        a(href=link, target="_blank")
          img(src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1580937/profile/profile-512.jpg?1519351323", width="50px", data-toggle="tooltip", title="Leaf Dragon")
        |  Pixel Art Maker
      button.navbar-toggler(type="button", data-toggle="collapse", data-target="#navbarSupportedContent", aria-controls="navbarSupportedContent", aria-expanded="false", aria-label="Toggle navigation")
        span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        ul.navbar-nav.mr-auto
          li.nav-item.dropdown
            a#navbarDropdown.nav-link.dropdown-toggle(href="#", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
              | File
            .dropdown-menu(aria-labelledby="navbarDropdown")
              a.dropdown-item(id=savePNG, href="#")
                i.fas.fa-download
                |  Save PNG
              a.dropdown-item(id=saveJPEG, href="#")
                i.fas.fa-download
                |  Save JPEG
              .dropdown-divider
              a.dropdown-item(href="#", data-toggle="modal" data-target="#" + deleteConfirmation)
                i.fas.fa-trash-alt
                |  Delete
          li.nav-item.dropdown
            a#navbarDropdown.nav-link.dropdown-toggle(href="#", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
              | Border
            .dropdown-menu(aria-labelledby="navbarDropdown")
              a.dropdown-item(id=borderDefault, href="#")
                i.fas.fa-table
                |  Default
              .dropdown-divider
              a.dropdown-item(id=borderLess, href="#")
                i.far.fa-square
                |  Borderless
              .dropdown-divider
              input.form-control.mr-sm-2(id=borderColor, type="color", value="#4DB6AC", data-toggle="tooltip", title="Border color")
          li.nav-item.dropdown
            a#navbarDropdown.nav-link.dropdown-toggle(href="#", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
              | Pixel Art
            .dropdown-menu(id=pixelArt, aria-labelledby="navbarDropdown")
              a.dropdown-item(href="#", data-toggle="modal" data-target="#" + pixelArtModalPikachu)
                svg(width=20, height=20)
                  path(
                    fill="yellow"
                    stroke="black"
                    d="M3 8 C5 8, -5 19, 10 19 C10 19, 25 20, 16 8 L20 0 L13 6 L7 6 L0 0 Z"
                  )
                  circle(cx=7, cy=11, r=1, fill="black")
                  circle(cx=13, cy=11, r=1, fill="black")
                  line(x1=9, y1=13, x2=11, y2=13, stroke="black")
                  path(fill="none", stroke="black", d="M7 15 C7 15, 10 17, 13 15")
                  circle(cx=4, cy=16, r=2, fill="red")
                  circle(cx=16, cy=16, r=2, fill="red")
                |  ピカチュー
              a.dropdown-item(href="#", data-toggle="modal" data-target="#" + pixelArtModalPokeball)
                svg(width=20, height=20)
                  defs
                    linearGradient(id="pokeball", x1=0, x2=0, y1=0, y2=1)
                      stop(offset="0%", stop-color="red")
                      stop(offset="45%", stop-color="red")
                      stop(offset="45%", stop-color="black")
                      stop(offset="55%", stop-color="black")
                      stop(offset="55%", stop-color="white")
                      stop(offset="100", stop-color="white")
                  circle(cx=10, cy=10, r=9, stroke="black", fill="url(#pokeball)")
                  circle(cx=10, cy=10, r=2, stroke="black", fill="white")
                |  Pokeball
          li.nav-item.dropdown
            a#navbarDropdown.nav-link.dropdown-toggle(href="#", role="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="false")
              | Help
            .dropdown-menu(aria-labelledby="navbarDropdown")
              a.dropdown-item(href="#", data-toggle="modal", data-target="#" + helpView)
                i.fas.fa-question-circle
                |  View Help
              .dropdown-divider
              a.dropdown-item(href="#", data-toggle="modal", data-target="#" + helpAbout)
                i.fas.fa-info-circle
                |  About
    
    // Bootstrap container fluid
    .container-fluid
      // Bootstrap nav tab
      nav
        ul.nav.nav-tabs.justify-content-center
          li.nav-item(data-toggle="tooltip", title="Paint brush color")
            .nav-link
              input.form-control.mr-sm-2(id=colorPicker, type="color")
          li.nav-item(data-toggle="tooltip", title="Paint brush")
            a.nav-link.active(id=toolPaint, href="#")
              i.fas.fa-paint-brush.fa-2x
          li.nav-item(data-toggle="tooltip", title="Dipper")
            a.nav-link(id=toolDipper, href="#")
              i.fas.fa-eye-dropper.fa-2x
          li.nav-item(data-toggle="tooltip", title="Eraser")
            a.nav-link(id=toolEraser, href="#")
              i.fas.fa-eraser.fa-2x
          li.nav-item(data-toggle="tooltip", title="Size Picker")
            a.nav-link(data-toggle="collapse", href="#" + mainSizePicker, role="button", aria-expanded="false", aria-controls="collapseExample")
              i.fas.fa-table.fa-2x

      main.text-center(class=main)
        // Bootstrap collapse for the size picker 
        .collapse(id=mainSizePicker, class=mainSizePicker)
          .card.card-body
            form.form-inline.justify-content-center(id=sizePicker)
              label.mb-2.mr-sm-2(class=label, for=sizePickerWidth) Width:
              input.form-control.mb-2.mr-sm-2(id=sizePickerWidth, type="number", min="1", max="40", value="20", required="required")
              label.mb-2.mr-sm-2(class=label, for=sizePickerHeight) Height:
              input.form-control.mb-2.mr-sm-2(id=sizePickerHeight, type="number", min="1", max="48", value="20", required="required")
              .form-check.mb-2.mr-sm-2
                a.btn.btn-primary(data-toggle="modal" data-target="#" + sizePickerModal)
                  i.fas.fa-table
                  |  Submit
        table(id=table)

    // Modal Submit 
    .modal.fade(id=sizePickerModal, tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header.bg-warning
            h5.modal-title
              i.fas.fa-exclamation-circle
              |  Submit?
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          .modal-body
            | Do you want to recreate the table elements?
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
            button.btn.btn-warning(id=sizePickerSubmit, type='button', data-dismiss='modal')
              i.fas.fa-exclamation-circle
              |  Submit
    // Modal Delete 
    .modal.fade(id=deleteConfirmation, tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header.bg-danger
            h5.modal-title
              i.fas.fa-exclamation-triangle
              |  Delete?
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          .modal-body
            | Do you want to delete the table elements?
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
            button.btn.btn-danger(id=deleteButton, type='button', data-dismiss='modal')
              i.fas.fa-exclamation-triangle
              |  Delete
    // Modal Pikachu
    .modal.fade(id=pixelArtModalPikachu, tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header.bg-warning
            h5.modal-title ピカチュー?
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          .modal-body
            | Do you want to recreate the table elements with a ピカチュー pixel art?
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
            button.btn.btn-warning.bg-warning(id=pixelArtPikachu, type='button', data-dismiss='modal')
              i.fas.fa-exclamation-circle
              |  ピカチュー
    // Modal Pokeball
    .modal.fade(id=pixelArtModalPokeball, tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header.bg-warning
            h5.modal-title  Pokeball?
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          .modal-body
            | Do you want to recreate the table elements with a Pokeball pixel art?
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
            button.btn.btn-warning.bg-warning(id=pixelArtPokeball, type='button', data-dismiss='modal')
              i.fas.fa-exclamation-circle
              |  Pokeball
    // Modal help view 
    .modal.fade(id=helpView, tabindex='-1', role='dialog', aria-labelledby='exampleModalLongTitle', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header.bg-info.text-white
            h5.modal-title
              i.fas.fa-question-circle
              |  Help
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          .modal-body(id=helpViewBody)
            p File &gt; 
              i.fas.fa-download
              span.font-weight-bold  Save PNG
              |  will save a png file of the drawn pixel art.
            p File &gt; 
              i.fas.fa-download
              span.font-weight-bold  Save JPEG
              |  will save a png file of the drawn pixel art.
            p File &gt; 
              i.fas.fa-trash-alt
              span.font-weight-bold  Delete
              |  will delete the canvas.
            p Border &gt; 
              i.fas.fa-table
              span.font-weight-bold  Default
              |  will delete the canvas.
            p Border &gt; 
              i.far.fa-square
              span.font-weight-bold  Borderless
              |  will color the border white.
            p Border &gt; 
              i.far.fa-square
              span.font-weight-bold  Color
              |  will color the border to selected color.
            p Pixel Art &gt; 
              svg(width=20, height=20)
                path(
                  fill="yellow"
                  stroke="black"
                  d="M3 8 C5 8, -5 19, 10 19 C10 19, 25 20, 16 8 L20 0 L13 6 L7 6 L0 0 Z"
                )
                circle(cx=7, cy=11, r=1, fill="black")
                circle(cx=13, cy=11, r=1, fill="black")
                line(x1=9, y1=13, x2=11, y2=13, stroke="black")
                path(fill="none", stroke="black", d="M7 15 C7 15, 10 17, 13 15")
                circle(cx=4, cy=16, r=2, fill="red")
                circle(cx=16, cy=16, r=2, fill="red")
              span.font-weight-bold  ピカチュー 
              |  will draw Pikachu.
            p Pixel Art &gt; 
              svg(width=20, height=20)
                defs
                  linearGradient(id="pokeball1", x1=0, x2=0, y1=0, y2=1)
                    stop(offset="0%", stop-color="red")
                    stop(offset="45%", stop-color="red")
                    stop(offset="45%", stop-color="black")
                    stop(offset="55%", stop-color="black")
                    stop(offset="55%", stop-color="white")
                    stop(offset="100", stop-color="white")
                circle(cx=10, cy=10, r=9, stroke="black", fill="url(#pokeball1)")
                circle(cx=10, cy=10, r=2, stroke="black", fill="white")
              span.font-weight-bold  Pokeball
              |  will draw a pokeball.
            p Help &gt; 
              i.fas.fa-question-circle
              span.font-weight-bold  View Help
              |  will display the help documentation.
            p Help &gt; 
              i.fas.fa-info-circle
              span.font-weight-bold  About
              |  will display the description.
            p
              i.far.fa-square
              span.font-weight-bold  Color
              |  will color the paint to selected color.
            p
              i.far.fa-square
              span.font-weight-bold  Width
              |  will set the width of the canvas.
            p
              i.far.fa-square
              span.font-weight-bold  Height
              |  will set the height of the canvas.
            p
              i.far.fa-square
              span.font-weight-bold  Submit
              |  will submit the form with the width and height information.
            p
              i.fas.fa-paint-brush
              span.font-weight-bold  Paint
              |  will select the paint brush.
            p
              i.fas.fa-eye-dropper
              span.font-weight-bold  Dipper
              |  will select the dipper to copy the selected color.
            p
              i.fas.fa-eraser
              span.font-weight-bold  Erase
              |  will select the eraser to erase the selected target.
            p
              i.fas.fa-eraser
              span.font-weight-bold  Double Click
              |  will erase the selected target with a double click.
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
    // Modal help about 
    .modal.fade(id=helpAbout, tabindex="-1", role="dialog", aria-labelledby="exampleModalCenterTitle", aria-hidden="true")
      .modal-dialog.modal-dialog-centered(role="document")
        .modal-content
          .modal-header.bg-info.text-white
            h5.modal-title
              i.fas.fa-info-circle
              |  About
            button.close(type="button", data-dismiss="modal", aria-label="Close")
              span(aria-hidden="true") ×
          .modal-body
            p Title: #{title}
            p Author: #{author}
            p Description: #{description}
            p Link: 
              a(href=link, target="_blank") Leaf Dragon(new tab)
          .modal-footer
            button.btn.btn-secondary(type="button", data-dismiss="modal") Close

    // Script 
    script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    )
    script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    )
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    )
    script(src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js")
    script(src="script\\script.js")
